/**
 *  Light Follows Me with Zones and Mode Control
 *
 *  Copyright 2015 Tim Slagle
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 *  in compliance with the License. You may obtain a copy of the License at:
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *	The original licensing applies, with the following exceptions:
 *		1.	These modifications may NOT be used without freely distributing all these modifications freely
 *			and without limitation, in source form.	 The distribution may be met with a link to source code
 *			with these modifications.
 *		2.	These modifications may NOT be used, directly or indirectly, for the purpose of any type of
 *			monetary gain.	These modifications may not be used in a larger entity which is being sold,
 *			leased, or anything other than freely given.
 *		3.	To clarify 1 and 2 above, if you use these modifications, it must be a free project, and
 *			available to anyone with "no strings attached."	 (You may require a free registration on
 *			a free website or portal in order to distribute the modifications.)
 *		4.	The above listed exceptions to the original licensing do not apply to the holder of the
 *			copyright of the original work.	 The original copyright holder can use the modifications
 *			to hopefully improve their original work.  In that event, this author transfers all claim
 *			and ownership of the modifications to "SmartThings."
 *
 *	Original Copyright information:
 *
 *	Copyright 2014 SmartThings
 *
 *	Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 *	in compliance with the License. You may obtain a copy of the License at:
 *
 *		http://www.apache.org/licenses/LICENSE-2.0
 *
 *	Unless required by applicable law or agreed to in writing, software distributed under the License is distributed
 *	on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License
 *	for the specific language governing permissions and limitations under the License.
 *
 */
 
definition(
    name: "Light Follows Me with Zones and Mode Control",
    namespace: "tslagle13",
    author: "Tim Slagle",
    description: "Control",
    category: "Convenience",
    iconUrl: "https://s3.amazonaws.com/smartapp-icons/Convenience/Cat-Convenience.png",
    iconX2Url: "https://s3.amazonaws.com/smartapp-icons/Convenience/Cat-Convenience@2x.png",
    iconX3Url: "https://s3.amazonaws.com/smartapp-icons/Convenience/Cat-Convenience@2x.png")



preferences {
    page name:"pageSetup"
    page name:"pageSetupScenarioA"
    page name:"pageSetupScenarioB"
    page name:"pageSetupScenarioC"
    page name:"pageSetupScenarioD"
    page name:"pageSetupScenarioE"
    page name:"pageSetupScenarioF"
    page name:"pageSetupScenarioG"
    page name:"pageSetupScenarioH"
    page name:"pageSetupScenarioI"
    page name:"pageSetupScenarioJ"
    page name:"pageSetupScenarioK"
    page name:"pageSetupScenarioL"
    page name:"pageSetupScenarioM"
    page name:"pageSetupScenarioN"
    page name:"pageSetupScenarioO"
    
}

// Show setup page
def pageSetup() {
if (settings.ScenarioNameA == null) {
        settings.ScenarioNameA = "Empty"
        settings.EditNameA = "Tap to create a scene"
    }
    else {
    settings.EditNameA = "Tap to edit scene"
    }


if (settings.ScenarioNameB == null) {
        settings.ScenarioNameB = "Empty"
    settings.EditNameB = "Tap to create a scene"
    }
    else {
    settings.EditNameB = "Tap to edit scene"
    }
    

if (settings.ScenarioNameC == null) {
        settings.ScenarioNameC = "Empty"
    settings.EditNameC = "Tap to create a scene"
    }
    else {
    settings.EditNameC = "Tap to edit scene"
    }


if (settings.ScenarioNameD == null) {
        settings.ScenarioNameD = "Empty"
    settings.EditNameD = "Tap to create a scene"
    }
    else {
    settings.EditNameD = "Tap to edit scene"
    }   


if (settings.ScenarioNameE == null) {
        settings.ScenarioNameE = "Empty"
    settings.EditNameE = "Tap to create a scene"
    }
    else {
    settings.EditNameE = "Tap to edit scene"
    }


if (settings.ScenarioNameF == null) {
        settings.ScenarioNameF = "Empty"
    settings.EditNameF = "Tap to create a scene"
    }
    else {
    settings.EditNameF = "Tap to edit scene"
    }    


if (settings.ScenarioNameG == null) {
        settings.ScenarioNameG = "Empty"
    settings.EditNameG = "Tap to create a scene"
    }
    else {
    settings.EditNameG = "Tap to edit scene"
    }    


if (settings.ScenarioNameH == null) {
        settings.ScenarioNameH = "Empty"
    settings.EditNameH = "Tap to create a scene"
    }
    else {
    settings.EditNameH = "Tap to edit scene"
    }    


if (settings.ScenarioNameI == null) {
        settings.ScenarioNameI = "Empty"
    settings.EditNameI = "Tap to create a scene"
    }
    else {
    settings.EditNameI = "Tap to edit scene"
    }    


if (settings.ScenarioNameJ == null) {
        settings.ScenarioNameJ = "Empty"
    settings.EditNameJ = "Tap to create a scene"
    }
    else {
    settings.EditNameJ = "Tap to edit scene"
    }   


if (settings.ScenarioNameK == null) {
        settings.ScenarioNameK = "Empty"
    settings.EditNameK = "Tap to create a scene"
    }
    else {
    settings.EditNameK = "Tap to edit scene"
    }    


if (settings.ScenarioNameL == null) {
        settings.ScenarioNameL = "Empty"
    settings.EditNameL = "Tap to create a scene"
    }
    else {
    settings.EditNameL = "Tap to edit scene"
    }    


if (settings.ScenarioNameM == null) {
        settings.ScenarioNameM = "Empty"
    settings.EditNameM = "Tap to create a scene"
    }
    else {
    settings.EditNameM = "Tap to edit scene"
    }   


if (settings.ScenarioNameN == null) {
        settings.ScenarioNameN = "Empty"
    settings.EditNameN = "Tap to create a scene"
    }
    else {
    settings.EditNameN = "Tap to edit scene"
    }


if (settings.ScenarioNameO == null) {
        settings.ScenarioNameO = "Empty" 
    settings.EditNameO = "Tap to create a scene"
    }
    else {
    settings.EditNameO = "Tap to edit scene"
    }

	

    
    def pageProperties = [
        name:       "pageSetup",
        title:      "Status",
        nextPage:   null,
        install:    true,
        uninstall:  true
    ]


    return dynamicPage(pageProperties) {
        section("Setup Menu") {
            href "pageSetupScenarioA", title:"${settings.ScenarioNameA}", description:"${settings.EditNameA}"
            href "pageSetupScenarioB", title:"${settings.ScenarioNameB}", description:"${settings.EditNameB}"
            href "pageSetupScenarioC", title:"${settings.ScenarioNameC}", description:"${settings.EditNameC}"
            href "pageSetupScenarioD", title:"${settings.ScenarioNameD}", description:"${settings.EditNameD}"
            href "pageSetupScenarioE", title:"${settings.ScenarioNameE}", description:"${settings.EditNameE}"
            href "pageSetupScenarioF", title:"${settings.ScenarioNameF}", description:"${settings.EditNameF}"
            href "pageSetupScenarioG", title:"${settings.ScenarioNameG}", description:"${settings.EditNameG}"
            href "pageSetupScenarioH", title:"${settings.ScenarioNameH}", description:"${settings.EditNameH}"
            href "pageSetupScenarioI", title:"${settings.ScenarioNameI}", description:"${settings.EditNameI}"
            href "pageSetupScenarioJ", title:"${settings.ScenarioNameJ}", description:"${settings.EditNameJ}"
            href "pageSetupScenarioK", title:"${settings.ScenarioNameK}", description:"${settings.EditNameK}"
            href "pageSetupScenarioL", title:"${settings.ScenarioNameL}", description:"${settings.EditNameL}"
            href "pageSetupScenarioM", title:"${settings.ScenarioNameM}", description:"${settings.EditNameM}"
            href "pageSetupScenarioN", title:"${settings.ScenarioNameN}", description:"${settings.EditNameN}"
            href "pageSetupScenarioO", title:"${settings.ScenarioNameO}", description:"${settings.EditNameO}"
            }
        section([title:"Options", mobileOnly:true]) {
            label title:"Assign a name", required:false
        }
    }
}

// Show "pageSetupScenarioA" page
def pageSetupScenarioA() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsA = [
        name:       "A_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersA = [
        name:       "A_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionA = [
        name:       "A_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeA = [
        name:       "A_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelA = [
        name:       "A_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffA = [
        name:       "A_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameA = [
        name:       "ScenarioNameA",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioA",
        title:      "${settings.ScenarioNameA}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameA
            input inputMotionA
            input inputLightsA
            input inputDimmersA
            input inputLevelA
            input inputTurnOffA
            input inputModeA
        }
    }
}

def pageSetupScenarioB() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsB = [
        name:       "B_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersB = [
        name:       "B_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionB = [
        name:       "B_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeB = [
        name:       "B_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelB = [
        name:       "B_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffB = [
        name:       "B_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameB = [
        name:       "ScenarioNameB",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioB",
        title:      "${settings.ScenarioNameB}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameB
            input inputMotionB
            input inputLightsB
            input inputDimmersB
            input inputLevelB
            input inputTurnOffB
            input inputModeB
        }
    }
}

def pageSetupScenarioC() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsC = [
        name:       "C_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersC = [
        name:       "C_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionC = [
        name:       "C_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeC = [
        name:       "C_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelC = [
        name:       "C_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffC = [
        name:       "C_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameC = [
        name:       "ScenarioNameC",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioC",
        title:      "${settings.ScenarioNameC}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameC
            input inputMotionC
            input inputLightsC
            input inputDimmersC
            input inputLevelC
            input inputTurnOffC
            input inputModeC
        }
    }
}

def pageSetupScenarioD() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsD = [
        name:       "D_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersD = [
        name:       "D_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionD = [
        name:       "D_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeD = [
        name:       "D_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelD = [
        name:       "D_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffD = [
        name:       "D_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameD = [
        name:       "ScenarioNameD",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioD",
        title:      "${settings.ScenarioNameD}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameD
            input inputMotionD
            input inputLightsD
            input inputDimmersD
            input inputLevelD
            input inputTurnOffD
            input inputModeD
        }
    }
}

def pageSetupScenarioE() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsE = [
        name:       "E_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersE = [
        name:       "E_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionE = [
        name:       "E_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeE = [
        name:       "E_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelE = [
        name:       "E_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffE = [
        name:       "E_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameE = [
        name:       "ScenarioNameE",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioE",
        title:      "${settings.ScenarioNameE}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameE
            input inputMotionE
            input inputLightsE
            input inputDimmersE
            input inputLevelE
            input inputTurnOffE
            input inputModeE
        }
    }
}

def pageSetupScenarioF() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsF = [
        name:       "F_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersF = [
        name:       "F_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionF = [
        name:       "F_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeF = [
        name:       "F_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelF = [
        name:       "F_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffF = [
        name:       "F_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameF = [
        name:       "ScenarioNameF",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioF",
        title:      "${settings.ScenarioNameF}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameF
            input inputMotionF
            input inputLightsF
            input inputDimmersF
            input inputLevelF
            input inputTurnOffF
            input inputModeF
        }
    }
}

def pageSetupScenarioG() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsG = [
        name:       "G_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersG = [
        name:       "G_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionG = [
        name:       "G_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeG = [
        name:       "G_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelG = [
        name:       "G_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffG = [
        name:       "G_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameG = [
        name:       "ScenarioNameG",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioG",
        title:      "${settings.ScenarioNameG}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameG
            input inputMotionG
            input inputLightsG
            input inputDimmersG
            input inputLevelG
            input inputTurnOffG
            input inputModeG
        }
    }
}

def pageSetupScenarioH() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsH = [
        name:       "H_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersH = [
        name:       "H_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionH = [
        name:       "H_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeH = [
        name:       "H_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelH = [
        name:       "H_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffH = [
        name:       "H_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameH = [
        name:       "ScenarioNameH",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioH",
        title:      "${settings.ScenarioNameH}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameH
            input inputMotionH
            input inputLightsH
            input inputDimmersH
            input inputLevelH
            input inputTurnOffH
            input inputModeH
        }
    }
}

def pageSetupScenarioI() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsI = [
        name:       "I_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersI = [
        name:       "I_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionI = [
        name:       "I_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeI = [
        name:       "I_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelI = [
        name:       "I_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffI = [
        name:       "I_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameI = [
        name:       "ScenarioNameI",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioI",
        title:      "${settings.ScenarioNameI}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameI
            input inputMotionI
            input inputLightsI
            input inputDimmersI
            input inputLevelI
            input inputTurnOffI
            input inputModeI
        }
    }
}

def pageSetupScenarioJ() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsJ = [
        name:       "J_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersJ = [
        name:       "J_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionJ = [
        name:       "J_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeJ = [
        name:       "J_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelJ = [
        name:       "J_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffJ = [
        name:       "J_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameJ = [
        name:       "ScenarioNameJ",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioJ",
        title:      "${settings.ScenarioNameJ}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameJ
            input inputMotionJ
            input inputLightsJ
            input inputDimmersJ
            input inputLevelJ
            input inputTurnOffJ
            input inputModeJ
        }
    }
}

def pageSetupScenarioK() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsK = [
        name:       "K_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersK = [
        name:       "K_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionK = [
        name:       "K_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeK = [
        name:       "K_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelK = [
        name:       "K_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffK = [
        name:       "K_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameK = [
        name:       "ScenarioNameK",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioK",
        title:      "${settings.ScenarioNameK}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameK
            input inputMotionK
            input inputLightsK
            input inputDimmersK
            input inputLevelK
            input inputTurnOffK
            input inputModeK
        }
    }
}

def pageSetupScenarioL() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsL = [
        name:       "L_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersL = [
        name:       "L_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionL = [
        name:       "L_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeL = [
        name:       "L_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelL = [
        name:       "L_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffL = [
        name:       "L_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameL = [
        name:       "ScenarioNameL",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioL",
        title:      "${settings.ScenarioNameL}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameL
            input inputMotionL
            input inputLightsL
            input inputDimmersL
            input inputLevelL
            input inputTurnOffL
            input inputModeL
        }
    }
}

def pageSetupScenarioM() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsM = [
        name:       "M_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersM = [
        name:       "M_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionM = [
        name:       "M_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeM = [
        name:       "M_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelM = [
        name:       "M_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffM = [
        name:       "M_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameM = [
        name:       "ScenarioNameM",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioM",
        title:      "${settings.ScenarioNameM}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameM
            input inputMotionM
            input inputLightsM
            input inputDimmersM
            input inputLevelM
            input inputTurnOffM
            input inputModeM
        }
    }
}

def pageSetupScenarioN() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsN = [
        name:       "N_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersN = [
        name:       "N_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionN = [
        name:       "N_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeN = [
        name:       "N_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelN = [
        name:       "N_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffN = [
        name:       "N_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameN = [
        name:       "ScenarioNameN",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioN",
        title:      "${settings.ScenarioNameN}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameN
            input inputMotionN
            input inputLightsN
            input inputDimmersN
            input inputLevelN
            input inputTurnOffN
            input inputModeN
        }
    }
}

def pageSetupScenarioO() {
    def helpPage =
        "Select a motion sensor to control a set of lights." +
        "Each scenario can control dimmers and switches but can" +
        "also be restricted to mode and turned off after motions stops."

    def inputLightsO = [
        name:       "O_switches",
        type:       "capability.switch",
        title:      "Which lights?",
        multiple:   true,
        required:   false
    ]
    def inputDimmersO = [
        name:       "O_dimmers",
        type:       "capability.switchLevel",
        title:      "Dim the following...",
        multiple:   true,
        required:   false
    ]

    def inputMotionO = [
        name:       "O_motion",
        type:       "capability.motionSensor",
        title:      "Which motion sensors?",
        multiple:   true,
        required:   false
    ]
    
    def inputModeO = [
        name:       "O_mode",
        type:       "mode",
        title:      "Only during the following modes...",
        multiple:   true,
        required:   false
    ]
    
    def inputLevelO = [
        name:       "O_level",
        type:       "enum",
        options: [[10:"10%"],[20:"20%"],[30:"30%"],[40:"40%"],[50:"50%"],[60:"60%"],[70:"70%"],[80:"80%"],[90:"90%"],[100:"100%"]],
        title:      "Set dimmers to this level",
        multiple:   false,
        required:   false
    ]
    
    def inputTurnOffO = [
        name:       "O_turnOff",
        type:       "number",
        title:      "Turn off this scene after motion stops for...",
        multiple:   false,
        required:   false
    ]
    
    def inputScenarioNameO = [
        name:       "ScenarioNameO",
        type:       "text",
        title:      "Scenario Name",
        multiple:   false,
        required:   false,
        defaultValue: empty
    ]
    
    def pageProperties = [
        name:       "pageSetupScenarioO",
        title:      "${settings.ScenarioNameO}",
        nextPage:   "pageSetup",
        uninstall:  true
    ]

    return dynamicPage(pageProperties) {
        section {
            paragraph helpPage
            input inputScenarioNameO
            input inputMotionO
            input inputLightsO
            input inputDimmersO
            input inputLevelO
            input inputTurnOffO
            input inputModeO
        }
    }
}

def installed() {

    initialize()
}

def updated() {

    unschedule()
    unsubscribe()
    initialize()
}

def initialize() {
if(settings.A_motion) {
	subscribe(settings.A_motion, "motion.active", onMotionA)
	subscribe(settings.A_motion, "motion.inactive", onMotionA)
}

if(settings.B_motion) {
	subscribe(settings.B_motion, "motion.active", onMotionB)
	subscribe(settings.B_motion, "motion.inactive", onMotionB)
}

if(settings.C_motion) {
	subscribe(settings.C_motion, "motion.active", onMotionC)
	subscribe(settings.C_motion, "motion.inactive", onMotionC)
}

if(settings.D_motion) {
	subscribe(settings.D_motion, "motion.active", onMotionD)
	subscribe(settings.D_motion, "motion.inactive", onMotionD)
}

if(settings.E_motion) {
	subscribe(settings.E_motion, "motion.active", onMotionE)
	subscribe(settings.E_motion, "motion.inactive", onMotionE)
}

if(settings.F_motion) {
	subscribe(settings.F_motion, "motion.active", onMotionF)
	subscribe(settings.F_motion, "motion.inactive", onMotionF)
}

if(settings.G_motion) {
	subscribe(settings.G_motion, "motion.active", onMotionG)
	subscribe(settings.G_motion, "motion.inactive", onMotionG)
}

if(settings.H_motion) {
	subscribe(settings.H_motion, "motion.active", onMotionH)
	subscribe(settings.H_motion, "motion.inactive", onMotionH)
}

if(settings.I_motion) {
	subscribe(settings.I_motion, "motion.active", onMotionI)
	subscribe(settings.I_motion, "motion.inactive", onMotionI)
}

if(settings.J_motion) {
	subscribe(settings.J_motion, "motion.active", onMotionJ)
	subscribe(settings.J_motion, "motion.inactive", onMotionJ)
}

if(settings.K_motion) {
	subscribe(settings.K_motion, "motion.active", onMotionK)
	subscribe(settings.K_motion, "motion.inactive", onMotionK)
}

if(settings.L_motion) {
	subscribe(settings.L_motion, "motion.active", onMotionL)
	subscribe(settings.L_motion, "motion.inactive", onMotionL)
}

if(settings.M_motion) {
	subscribe(settings.M_motion, "motion.active", onMotionM)
	subscribe(settings.M_motion, "motion.inactive", onMotionM)
}

if(settings.N_motion) {
	subscribe(settings.N_motion, "motion.active", onMotionN)
	subscribe(settings.N_motion, "motion.inactive", onMotionN)
}

if(settings.O_motion) {
	subscribe(settings.O_motion, "motion.active", onMotionO)
	subscribe(settings.O_motion, "motion.inactive", onMotionO)
}
}

def onMotionA(evt) {
def A_levelOn = settings.A_level as Integer
def delayA = settings.A_turnOff * 60
if (evt.value == "active") {
	if (settings.A_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameA}'")
		settings.A_dimmers?.setLevel(A_levelOn)
		settings.A_switches?.on()
        unschedule(delayTurnOffA)
	}
    else if (settings.A_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameA}'")
		settings.A_dimmers?.setLevel(A_levelOn)
		settings.A_switches?.on()
        unschedule(delayTurnOffA)
	}
}
if (evt.value == "inactive") {
    	if (settings.A_turnOff) {
		runIn(delayA, "delayTurnOffA")
        }
        
        else {
        settings.A_switches?.off()
		settings.A_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffA(){
	settings.A_switches?.off()
	settings.A_dimmers?.setLevel(0)
}

def onMotionB(evt) {
def B_levelOn = settings.B_level as Integer
def delayB = settings.B_turnOff * 60
if (evt.value == "active") {
	if (settings.B_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameB}'")
		settings.B_dimmers?.setLevel(B_levelOn)
		settings.B_switches?.on()
        unschedule(delayTurnOffB)
	}
    else if (settings.B_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameB}'")
		settings.B_dimmers?.setLevel(settings.B_levelOn)
		settings.B_switches?.on()
        unschedule(delayTurnOffB)
	}
}
if (evt.value == "inactive") {
    	if (settings.B_turnOff) {
		runIn(delayB, "delayTurnOffB")
        }
        
        else {
        settings.B_switches?.off()
		settings.B_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffB(){
	settings.B_switches?.off()
	settings.B_dimmers?.setLevel(0)
}

def onMotionC(evt) {
def C_levelOn = settings.C_level as Integer
def delayC = settings.C_turnOff * 60
if (evt.value == "active") {
	if (settings.C_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameC}'")
		settings.C_dimmers?.setLevel(C_levelOn)
		settings.C_switches?.on()
        unschedule(delayTurnOffC)
	}
    else if (settings.C_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameC}'")
		settings.C_dimmers?.setLevel(C_levelOn)
		settings.C_switches?.on()
        unschedule(delayTurnOffC)
	}
}
if (evt.value == "inactive") {
    	if (settings.C_turnOff) {
		runIn(delayC, "delayTurnOffC")
        }
        
        else {
        settings.C_switches?.off()
		settings.C_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffC(){
	settings.C_switches?.off()
	settings.C_dimmers?.setLevel(0)
}

def onMotionD(evt) {
def D_levelOn = settings.D_level as Integer
def delayD = settings.D_turnOff * 60
if (evt.value == "active") {
	if (settings.D_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameD}'")
		settings.D_dimmers?.setLevel(D_levelOn)
		settings.D_switches?.on()
        unschedule(delayTurnOffD)
	}
    else if (settings.D_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameD}'")
		settings.D_dimmers?.setLevel(D_levelOn)
		settings.D_switches?.on()
        unschedule(delayTurnOffD)
	}
}
if (evt.value == "inactive") {
    	if (settings.D_turnOff) {
		runIn(delayD, "delayTurnOffD")
        }
        
        else {
        settings.D_switches?.off()
		settings.D_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffD(){
	settings.D_switches?.off()
	settings.D_dimmers?.setLevel(0)
}

def onMotionE(evt) {
def E_levelOn = settings.E_level as Integer
def delayE = settings.E_turnOff * 60
if (evt.value == "active") {
	if (settings.E_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameE}'")
		settings.E_dimmers?.setLevel(E_levelOn)
		settings.E_switches?.on()
        unschedule(delayTurnOffE)
	}
    else if (settings.E_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameE}'")
		settings.E_dimmers?.setLevel(E_levelOn)
		settings.E_switches?.on()
        unschedule(delayTurnOffE)
	}
}
if (evt.value == "inactive") {
    	if (settings.E_turnOff) {
		runIn(delayE, "delayTurnOffE")
        }
        
        else {
        settings.E_switches?.off()
		settings.E_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffE(){
	settings.E_switches?.off()
	settings.E_dimmers?.setLevel(0)
}

def onMotionF(evt) {
def F_levelOn = settings.F_level as Integer
def delayF = settings.F_turnOff * 60
if (evt.value == "active") {
	if (settings.F_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameF}'")
		settings.F_dimmers?.setLevel(F_levelOn)
		settings.F_switches?.on()
        unschedule(delayTurnOffF)
	}
    else if (settings.F_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameF}'")
		settings.F_dimmers?.setLevel(F_levelOn)
		settings.F_switches?.on()
        unschedule(delayTurnOffF)
	}
}
if (evt.value == "inactive") {
    	if (settings.F_turnOff) {
		runIn(delayF, "delayTurnOffF")
        }
        
        else {
        settings.F_switches?.off()
		settings.F_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffF(){
	settings.F_switches?.off()
	settings.F_dimmers?.setLevel(0)
}

def onMotionG(evt) {
def G_levelOn = settings.G_level as Integer
def delayG = settings.G_turnOff * 60
if (evt.value == "active") {
	if (settings.G_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameG}'")
		settings.G_dimmers?.setLevel(G_levelOn)
		settings.G_switches?.on()
        unschedule(delayTurnOffG)
	}
    else if (settings.G_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameG}'")
		settings.G_dimmers?.setLevel(G_levelOn)
		settings.G_switches?.on()
        unschedule(delayTurnOffG)
	}
}
if (evt.value == "inactive") {
    	if (settings.G_turnOff) {
		runIn(delayG, "delayTurnOffG")
        }
        
        else {
        settings.G_switches?.off()
		settings.G_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffG(){
	settings.G_switches?.off()
	settings.G_dimmers?.setLevel(0)
}

def onMotionH(evt) {
def H_levelOn = settings.H_level as Integer
def delayH = settings.H_turnOff * 60
if (evt.value == "active") {
	if (settings.H_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameH}'")
		settings.H_dimmers?.setLevel(H_levelOn)
		settings.H_switches?.on()
        unschedule(delayTurnOffH)
	}
    else if (settings.H_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameH}'")
		settings.H_dimmers?.setLevel(H_levelOn)
		settings.H_switches?.on()
        unschedule(delayTurnOffH)
	}
}
if (evt.value == "inactive") {
    	if (settings.H_turnOff) {
		runIn(delayH, "delayTurnOffH")
        }
        
        else {
        settings.H_switches?.off()
		settings.H_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffH(){
	settings.H_switches?.off()
	settings.H_dimmers?.setLevel(0)
}

def onMotionI(evt) {
def I_levelOn = settings.I_level as Integer
def delayI = settings.I_turnOff * 60
if (evt.value == "active") {
	if (settings.I_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameI}'")
		settings.I_dimmers?.setLevel(I_levelOn)
		settings.I_switches?.on()
        unschedule(delayTurnOffI)
	}
    else if (settings.I_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameI}'")
		settings.I_dimmers?.setLevel(I_levelOn)
		settings.I_switches?.on()
        unschedule(delayTurnOffI)
	}
}
if (evt.value == "inactive") {
    	if (settings.I_turnOff) {
		runIn(delayI, "delayTurnOffI")
        }
        
        else {
        settings.I_switches?.off()
		settings.I_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffI(){
	settings.I_switches?.off()
	settings.I_dimmers?.setLevel(0)
}

def onMotionJ(evt) {
def J_levelOn = settings.J_level as Integer
def delayJ = settings.J_turnOff * 60
if (evt.value == "active") {
	if (settings.J_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameJ}'")
		settings.J_dimmers?.setLevel(J_levelOn)
		settings.J_switches?.on()
        unschedule(delayTurnOffJ)
	}
    else if (settings.J_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameJ}'")
		settings.J_dimmers?.setLevel(J_levelOn)
		settings.J_switches?.on()
        unschedule(delayTurnOffJ)
	}
}
if (evt.value == "inactive") {
    	if (settings.J_turnOff) {
		runIn(delayJ, "delayTurnOffJ")
        }
        
        else {
        settings.J_switches?.off()
		settings.J_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffJ(){
	settings.J_switches?.off()
	settings.J_dimmers?.setLevel(0)
}

def onMotionK(evt) {
def K_levelOn = settings.K_level as Integer
def delayK = settings.K_turnOff * 60
if (evt.value == "active") {
	if (settings.K_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameK}'")
		settings.K_dimmers?.setLevel(K_levelOn)
		settings.K_switches?.on()
        unschedule(delayTurnOffK)
	}
    else if (settings.K_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameK}'")
		settings.K_dimmers?.setLevel(K_levelOn)
		settings.K_switches?.on()
        unschedule(delayTurnOffK)
	}
}
if (evt.value == "inactive") {
    	if (settings.K_turnOff) {
		runIn(delayK, "delayTurnOffK")
        }
        
        else {
        settings.K_switches?.off()
		settings.K_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffK(){
	settings.K_switches?.off()
	settings.K_dimmers?.setLevel(0)
}

def onMotionL(evt) {
def L_levelOn = settings.L_level as Integer
def delayL = settings.L_turnOff * 60
if (evt.value == "active") {
	if (settings.L_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameL}'")
		settings.L_dimmers?.setLevel(L_levelOn)
		settings.L_switches?.on()
        unschedule(delayTurnOffL)
	}
    else if (settings.L_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameL}'")
		settings.L_dimmers?.setLevel(L_levelOn)
		settings.L_switches?.on()
        unschedule(delayTurnOffL)
	}
}
if (evt.value == "inactive") {
    	if (settings.L_turnOff) {
		runIn(delayL, "delayTurnOffL")
        }
        
        else {
        settings.L_switches?.off()
		settings.L_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffL(){
	settings.L_switches?.off()
	settings.L_dimmers?.setLevel(0)
}

def onMotionM(evt) {
def M_levelOn = settings.M_level as Integer
def delayM = settings.M_turnOff * 60
if (evt.value == "active") {
	if (settings.M_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameM}'")
		settings.M_dimmers?.setLevel(M_levelOn)
		settings.M_switches?.on()
        unschedule(delayTurnOffM)
	}
    else if (settings.M_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameM}'")
		settings.M_dimmers?.setLevel(M_levelOn)
		settings.M_switches?.on()
        unschedule(delayTurnOffM)
	}
}
if (evt.value == "inactive") {
    	if (settings.M_turnOff) {
		runIn(delayM, "delayTurnOffM")
        }
        
        else {
        settings.M_switches?.off()
		settings.M_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffM(){
	settings.M_switches?.off()
	settings.M_dimmers?.setLevel(0)
}

def onMotionN(evt) {
def N_levelOn = settings.N_level as Integer
def delayN = settings.N_turnOff * 60
if (evt.value == "active") {
	if (settings.N_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameN}'")
		settings.N_dimmers?.setLevel(N_levelOn)
		settings.N_switches?.on()
        unschedule(delayTurnOffN)
	}
    else if (settings.N_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameN}'")
		settings.N_dimmers?.setLevel(N_levelOn)
		settings.N_switches?.on()
        unschedule(delayTurnOffN)
	}
}
if (evt.value == "inactive") {
    	if (settings.N_turnOff) {
		runIn(delayN, "delayTurnOffN")
        }
        
        else {
        settings.N_switches?.off()
		settings.N_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffN(){
	settings.N_switches?.off()
	settings.N_dimmers?.setLevel(0)
}

def onMotionO(evt) {
def O_levelOn = settings.O_level as Integer
def delayO = settings.O_turnOff * 60
if (evt.value == "active") {
	if (settings.O_mode == null){
		log.debug("Motion Detected Running '${settings.ScenarioNameO}'")
		settings.O_dimmers?.setLevel(O_levelOn)
		settings.O_switches?.on()
        unschedule(delayTurnOffO)
	}
    else if (settings.O_mode.contains(location.mode)){
		log.debug("Motion Detected Running '${settings.ScenarioNameO}'")
		settings.O_dimmers?.setLevel(O_levelOn)
		settings.O_switches?.on()
        unschedule(delayTurnOffO)
	}
}
if (evt.value == "inactive") {
    	if (settings.O_turnOff) {
		runIn(delayO, "delayTurnOffO")
        }
        
        else {
        settings.O_switches?.off()
		settings.O_dimmers?.setLevel(0)
        }
	}
}

def delayTurnOffO(){
	settings.O_switches?.off()
	settings.O_dimmers?.setLevel(0)
}
